(function(t){function e(e){for(var o,a,s=e[0],u=e[1],l=e[2],c=0,p=[];c<s.length;c++)a=s[c],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={app:0},r=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=u;r.push(["cd49","chunk-vendors"]),n()})({"07de":function(t,e,n){},"0a0e":function(t,e,n){"use strict";n("07de")},"1be2":function(t,e,n){},"387a":function(t,e,n){},"41fd":function(t,e,n){},4890:function(t,e,n){t.exports=n.p+"img/key.ce4818eb.png"},"5c0b":function(t,e,n){"use strict";n("9c0c")},"65f4":function(t,e,n){"use strict";n("fd52")},"82df":function(t,e,n){"use strict";n("387a")},9399:function(t,e,n){"use strict";n("41fd")},"9c0c":function(t,e,n){},b7a2:function(t,e,n){"use strict";n("1be2")},c538:function(t,e,n){"use strict";n("f46e")},cd49:function(t,e,n){"use strict";n.r(e);var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVerified,expression:"isVerified"}],attrs:{id:"pages"}},[n("LoginForm"),n("AudioControls",{directives:[{name:"show",rawName:"v-show",value:"page-audio"==t.activeItemId,expression:"activeItemId == 'page-audio'"}],staticClass:"page center",attrs:{id:"page-audio"}}),n("LiveMap",{directives:[{name:"show",rawName:"v-show",value:"page-map"==t.activeItemId,expression:"activeItemId == 'page-map'"}],staticClass:"page",attrs:{id:"page-map"}}),n("PhotoFeed",{directives:[{name:"show",rawName:"v-show",value:"page-feed"==t.activeItemId,expression:"activeItemId == 'page-feed'"}],staticClass:"page",attrs:{id:"page-feed"}}),n("OperatorControls",{directives:[{name:"show",rawName:"v-show",value:"page-operator"==t.activeItemId,expression:"activeItemId == 'page-operator'"}],staticClass:"page",attrs:{id:"page-operator"}}),n("NowPlayingFeed",{directives:[{name:"show",rawName:"v-show",value:"page-now-playing"==t.activeItemId,expression:"activeItemId == 'page-now-playing'"}],staticClass:"page center",attrs:{id:"page-now-playing"}})],1),n("md-bottom-bar",{directives:[{name:"show",rawName:"v-show",value:t.isVerified,expression:"isVerified"}],attrs:{id:"mainMenu","md-active":t.activeItem},on:{"md-changed":t._onPageChanged}},[n("md-bottom-bar-item",{attrs:{id:"tab-audio","md-label":"Audio","md-icon":"audiotrack"}}),n("md-bottom-bar-item",{attrs:{id:"tab-feed"}},[n("md-icon",{staticClass:"md-bottom-bar-icon"},[t._v("rss_feed")]),n("span",{staticClass:"md-bottom-bar-label"},[t._v("Feed")])],1),n("md-bottom-bar-item",{attrs:{id:"tab-map","md-label":"Map","md-icon":"map"}}),n("md-bottom-bar-item",{attrs:{id:"tab-operator","md-label":"Operator","md-icon":"touch_app"}}),n("md-bottom-bar-item",{attrs:{id:"tab-now-playing","md-label":"Now Playing","md-icon":"library_music"}})],1)],1)},r=[],a=n("9ab4"),s=n("60a3"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("md-dialog",{attrs:{"md-active":t.showDialog&&!t.showError,"md-fullscreen":!1}},[n("md-dialog-title",[t._v("Craftventure AudioServer!")]),n("form",[n("md-dialog-content",[n("div",{staticClass:"md-layout"},[n("p",{staticClass:"md-layout-item md-body-1 md-size-100"},[t._v(" You're one step away from connecting to the AudioServer. Click connect and you're good to go! ")]),t.authPrefilled?t._e():n("div",{staticClass:"md-layout-item md-size-100"},[n("md-field",{class:t.getValidationClass("username")},[n("label",{attrs:{for:"username"}},[t._v("Username")]),n("md-input",{attrs:{name:"username",maxlength:"16",id:"username",disabled:t.sending},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),t.$v.form.username.required?t.$v.form.username.minlength?t._e():n("span",{staticClass:"md-error"},[t._v("Invalid username")]):n("span",{staticClass:"md-error"},[t._v("The username is required")])],1)],1),t.authPrefilled?t._e():n("div",{staticClass:"md-layout-item md-size-100"},[n("md-field",{class:t.getValidationClass("authCode")},[n("label",{attrs:{for:"authCode"}},[t._v("Authorization code")]),n("md-input",{attrs:{name:"authCode",id:"authCode",type:"password",disabled:t.sending},model:{value:t.form.authCode,callback:function(e){t.$set(t.form,"authCode",e)},expression:"form.authCode"}}),t.$v.form.authCode.required?t.$v.form.authCode.minlength?t._e():n("span",{staticClass:"md-error"},[t._v("Invalid authorization code")]):n("span",{staticClass:"md-error"},[t._v("The authorization code is required")])],1)],1),null!=t.form.server?n("md-field",[n("label",{attrs:{for:"server"}},[t._v("Server")]),n("md-select",{attrs:{name:"server",id:"server","md-dense":""},model:{value:t.form.server,callback:function(e){t.$set(t.form,"server",e)},expression:"form.server"}},[n("md-option",{attrs:{value:"default"}},[t._v("Default")]),n("md-option",{attrs:{value:t.serverQuery}},[t._v("Third party ("+t._s(t.serverQuery)+")")])],1)],1):t._e()],1)])],1),t.sending?n("md-progress-bar",{staticClass:"progress-bar",attrs:{"md-mode":"indeterminate"}}):t._e(),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:t.sending},on:{click:t.connect}},[t._v("Click here to connect ")])],1)],1),n("md-dialog",{attrs:{"md-active":t.showError,"md-fullscreen":!1},on:{"update:mdActive":function(e){t.showError=e},"update:md-active":function(e){t.showError=e}}},[n("md-dialog-title",[t._v("Disconnected")]),n("md-dialog-content",[n("div",{staticClass:"md-layout"},[t.disconnectedMessage?n("p",{staticClass:"md-layout-item md-body-1"},[t._v(" "+t._s(t.disconnectedMessage)+" ")]):t._e()])]),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showError=!1}}},[t._v("Close")])],1)],1)],1)},l=[],d=n("1dce"),c=n("b5ae"),p={_getParameterByName:function(t,e){e||(e=window.location.href),t=t.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),o=n.exec(e);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null},urlParams:null,getParam:function(t){return null!=this.urlParams&&this.urlParams.has(t)?this.urlParams.get(t):null},saveCurrentParams:function(){this.urlParams=new URLSearchParams(window.location.search)},clearParamsFromHistory:function(){history.replaceState({},"",location.pathname)}},h=p,f=n("e11e"),y=n.n(f);function m(){var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("safari")&&t.indexOf("chrome")<=-1}function v(t,e){return e.x>=t.xMin&&e.x<=t.xMax&&e.y>=t.yMin&&e.y<=t.yMax&&e.z>=t.zMin&&e.z<=t.zMax}function g(t){if(null!=t)return new f["Point"](t.x,t.y)}var _,b,O=c["helpers"].regex("username",/^[a-zA-Z0-9_]{1,16}$/),w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.form={username:null,authCode:null,server:null},e.authPrefilled=!1,e.showError=!1,e.serverQuery=null,e}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"showDialog",{get:function(){return!this.$audioServer.state.isConnected||!this.$audioServer.state.isVerified},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sending",{get:function(){return this.$audioServer.state.isConnecting},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnectedMessage",{get:function(){return this.$audioServer.state.disconnectedMessage},enumerable:!1,configurable:!0}),e.prototype.onDisconnectedMessageChanged=function(t){null!==t&&"undefined"!==typeof t&&(this.showError=!0)},e.prototype.connect=function(){if(m()){alert("It looks like you're using Safari. Safari may work, but using Chrome/Firefox is recommended");var t=new Audio("https://cdn.craftventure.net/audio/whitenoise.mp3");t.crossOrigin="anonymous",t.play()}this.$audioServer.audioContext.resume(),this.$v.$touch(),this.$v.$invalid||this.$audioServer.connect(this.$data.form.username,this.$data.form.authCode,"null"!=this.$data.form.server&&"default"!=this.$data.form.server?this.$data.form.server:null)},e.prototype.getValidationClass=function(t){var e=this.$v.form[t];if(e)return{"md-invalid":e.$invalid&&e.$dirty}},e.prototype.mounted=function(){this.form.username=h.getParam("username"),this.form.authCode=h.getParam("auth"),this.authPrefilled=null!=this.form.username&&null!=this.form.authCode,this.serverQuery=h.getParam("socket")||null,this.form.server=this.serverQuery},Object(a["a"])([Object(s["d"])("disconnectedMessage")],e.prototype,"onDisconnectedMessageChanged",null),e=Object(a["a"])([Object(s["a"])({components:{},mixins:[d["validationMixin"]],validations:{form:{username:{required:c["required"],maxLength:Object(c["maxLength"])(16),minLength:Object(c["minLength"])(1),validateUsername:O},authCode:{required:c["required"],minLength:Object(c["minLength"])(1)}}}})],e),e}(s["c"]),C=w,S=C,P=(n("c538"),n("2877")),I=Object(P["a"])(S,u,l,!1,null,"72da6886",null),E=I.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabMap"},[n("div",{attrs:{id:"map"}}),t._l(t.players,(function(t){return n("PlayerAvatar",{key:t.uuid,attrs:{player:t}})})),t._l(t.layers,(function(t){return n("MapLayerView",{key:t.id,attrs:{layer:t}})})),t._l(t.markers,(function(t){return n("MapMarkerView",{key:t.id,attrs:{data:t}})})),t._l(t.polygons,(function(t){return n("PolygonOverlayView",{key:t.id,attrs:{data:t}})})),n("md-button",{staticClass:"md-fab md-fab-bottom-right md-primary",attrs:{id:"followSelf"},nativeOn:{click:function(e){return t.toggleFollowSelf.apply(null,arguments)}}},[n("md-icon",[t._v(t._s(t.fabIcon))])],1)],2)},k=[],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},D=[],T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"avatarUrl",{get:function(){return null==this.player?null:"https://crafatar.com/avatars/"+this.player.uuid+"?size=16"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerIsSelf",{get:function(){return null==this.player?null:this.$audioServer.state.verifiedUuid===this.player.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selfLocation",{get:function(){return this.$audioServer.managedData.location},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapHolder",{get:function(){return this.$parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this.$parent.map},enumerable:!1,configurable:!0}),e.prototype.onScaleChanged=function(){this.updatePosition()},e.prototype.onSelfLocationUpdated=function(){this.updatePosition()},e.prototype.onPlayerChanged=function(){this.updatePosition()},e.prototype.onPlayerXChanged=function(){this.updatePosition()},e.prototype.onPlayerZChanged=function(){this.updatePosition()},e.prototype.onPlayerHiddenChanged=function(){this.updatePosition()},e.prototype.onPlayerIsSelfChanged=function(){this.updatePosition()},e.prototype.updatePosition=function(){this.marker.setZIndexOffset(this.player.y),this.marker.setLatLng(this.mapHolder.xy(this.player.x,this.player.z))},e.prototype.mounted=function(){this.marker=y.a.marker(this.mapHolder.xy(this.player.x,this.player.z),{icon:new y.a.Icon({iconUrl:this.avatarUrl,iconSize:[16,16],iconAnchor:[8,8],className:"pixelated"}),zIndexOffset:1}).addTo(this.map).bindPopup(this.player.name),this.updatePosition()},e.prototype.beforeDestroy=function(){var t;null===(t=this.marker)||void 0===t||t.remove()},Object(a["a"])([Object(s["b"])()],e.prototype,"player",void 0),Object(a["a"])([Object(s["d"])("scale")],e.prototype,"onScaleChanged",null),Object(a["a"])([Object(s["d"])("selfLocation")],e.prototype,"onSelfLocationUpdated",null),Object(a["a"])([Object(s["d"])("player")],e.prototype,"onPlayerChanged",null),Object(a["a"])([Object(s["d"])("player.x")],e.prototype,"onPlayerXChanged",null),Object(a["a"])([Object(s["d"])("player.z")],e.prototype,"onPlayerZChanged",null),Object(a["a"])([Object(s["d"])("player.hidden")],e.prototype,"onPlayerHiddenChanged",null),Object(a["a"])([Object(s["d"])("playerIsSelf")],e.prototype,"onPlayerIsSelfChanged",null),e=Object(a["a"])([Object(s["a"])({components:{}})],e),e}(s["c"]),j=T,R=j,M=Object(P["a"])(R,x,D,!1,null,null,null),L=M.exports,N={LOGIN:1,KICK:2,CLIENT_ACCEPTED:3,AREA_DEFINITION:4,AREA_STATE:5,SYNC:6,KEY_VALUE:7,PING:8,VOLUME:13,RELOAD:14,LOCATION_UPDATE:15,TRAIN_DEFINITION:16,TRAIN_POSITION_UPDATE:17,DISPLAY_AREA_ENTER:18,OPERATOR_DEFINITION:19,OPERATOR_CONTROL_UPDATE:20,OPERATOR_SLOT_UPDATE:21,OPERATOR_CONTROL_CLICK:22,OPERATOR_RIDE_UPDATE:34,PARK_PHOTO:23,PLAYER_LOCATIONS:27,ADD_MAP_LAYERS:28,REMOVE_MAP_LAYERS:35,MARKER_ADD:36,MARKER_REMOVE:37,POLYGON_OVERLAY_ADD:38,POLYGON_OVERLAY_REMOVE:39,SPATIAL_AUDIO_DEFINITION:29,SPATIAL_AUDIO_UPDATE:30,SPATIAL_AUDIO_REMOVE:31,AREA_REMOVE:32,BATCH_PACKET:33},$={protocolVersion:14},J=function(){function t(){this.version=$.protocolVersion,this.uuid="",this.auth=""}return t.prototype.set=function(t,e){return this.uuid=t,this.auth=e,this},t.prototype.fromJson=function(t){return this.uuid=t.uuid,this.auth=t.auth,this},t.prototype.asJson=function(){return JSON.stringify({id:N.LOGIN,version:this.version,uuid:this.uuid,auth:this.auth})},t}(),z=function(){function t(){this.message="",this.reason=""}return t.prototype.set=function(t,e){return this.message=t,this.reason=e,this},t.prototype.fromJson=function(t){return this.message=t.message,this.reason=t.reason,this},t.prototype.asJson=function(){return JSON.stringify({id:N.KICK,message:this.message,reason:this.reason})},t}(),F=function(){function t(){this.servername="",this.sendTime=0,this.uuid=null}return t.prototype.set=function(t){return this.servername=t,this},t.prototype.fromJson=function(t){return this.servername=t.servername,this.sendTime=t.send_time,this.uuid=t.uuid,this},t.prototype.asJson=function(){return JSON.stringify({id:N.CLIENT_ACCEPTED,servername:this.servername})},t}(),V=function(){function t(){this.areaId=-1,this.name=null,this.displayName=null,this.resources=[],this.overrides=[],this.fadeTime=500,this.sync=0,this.volume=1,this.repeatType=null,this.filters=[]}return t.prototype.fromJson=function(t){return this.areaId=t.area_id,this.name=t.name,this.displayName=t.display_name,this.resources=t.resources,this.overrides=t.overrides,this.fadeTime=t.fade_time,this.sync=t.sync,this.volume=t.volume,this.repeatType=t.repeat_type,this.filters=t.filters,this},t.prototype.asJson=function(){return""},t}(),U=(function(){function t(){this.areaId=null}t.prototype.fromJson=function(t){return this.areaId=t.area_id,this},t.prototype.asJson=function(){return""}}(),function(){function t(){this.areaId=-1,this.playing=!1}return t.prototype.fromJson=function(t){return this.areaId=t.area_id,this.playing=t.playing,this},t.prototype.asJson=function(){return""},t}()),H=function(){function t(){this.areaId=-1,this.sync=0}return t.prototype.fromJson=function(t){return this.areaId=t.area_id,this.sync=t.sync,this},t.prototype.asJson=function(){return""},t}(),G=(function(){function t(){this.key=null,this.value=null}t.prototype.fromJson=function(t){return this.key=t.key,this.value=t.value,this},t.prototype.asJson=function(){return""}}(),function(){function t(){this.sendTime=0}return t.prototype.set=function(t){return this.sendTime=t,this},t.prototype.fromJson=function(t){return this.sendTime=t.send_time,this},t.prototype.asJson=function(){return JSON.stringify({id:N.PING,send_time:this.sendTime})},t}()),W=function(){function t(){this.volume=null,this.type=null}return t.prototype.set=function(t,e){return this.volume=t,this.type=e,this},t.prototype.fromJson=function(t){return this.volume=t.volume,this.type=t.type,this},t.prototype.asJson=function(){return JSON.stringify({id:N.VOLUME,volume:this.volume,type:this.type})},t}(),Y=function(){function t(){this.x=null,this.y=null,this.z=null,this.yaw=null,this.pitch=null}return t.prototype.fromJson=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.yaw=t.yaw,this.pitch=t.pitch,this},t.prototype.asJson=function(){return JSON.stringify({id:N.LOCATION_UPDATE,x:this.x,y:this.y,z:this.z,yaw:this.yaw,pitch:this.pitch})},t}(),q=function(){function t(){this.name=null}return t.prototype.set=function(t){return this.name=null==t?null:t.name,this},t.prototype.fromJson=function(t){return this},t.prototype.asJson=function(){return JSON.stringify({id:N.DISPLAY_AREA_ENTER,name:this.name})},t}(),K=function(){function t(){this.rides=[]}return t.prototype.fromJson=function(t){return this.rides=t.rides,this},t.prototype.asJson=function(){return""},t}(),Z=function(){function t(){this.control=null}return t.prototype.fromJson=function(t){return this.control=t.control_model,this},t.prototype.asJson=function(){return""},t}(),B=function(){function t(){this.data=null}return t.prototype.fromJson=function(t){return this.data=t.data,this},t.prototype.asJson=function(){return""},t}(),Q=function(){function t(){this.rideId=null,this.controlId=null}return t.prototype.set=function(t,e){return this.rideId=t,this.controlId=e,this},t.prototype.asJson=function(){return JSON.stringify({id:N.OPERATOR_CONTROL_CLICK,ride_id:this.rideId,control_id:this.controlId})},t.prototype.fromJson=function(t){return this},t}(),X=function(){function t(){this.ride=null}return t.prototype.fromJson=function(t){return this.ride=t.ride,this},t.prototype.asJson=function(){return""},t}(),tt=function(){function t(){this.data=null,this.url=null,this.persons=[],this.name=null,this.time=null,this.type=null}return t.prototype.fromJson=function(t){return this.data=t.data,this.url=t.url,this.persons=t.persons,this.name=t.name,this.time=t.time,this.type=t.type,this},t.prototype.asJson=function(){return""},t}(),et=function(){function t(){this.players=[]}return t.prototype.fromJson=function(t){return this.players=t.players,this},t.prototype.asJson=function(){return""},t}(),nt=function(){function t(){this.mode=null,this.group=null,this.layers=[]}return t.prototype.fromJson=function(t){var e,n;return this.mode=t.mode,this.layers=null!==(e=t.layers)&&void 0!==e?e:[],this.group=null!==(n=t.group)&&void 0!==n?n:null,this},t.prototype.asJson=function(){return""},t}(),ot=(function(){function t(){}}(),function(){function t(){}}(),function(){function t(){this.remove=[],this.group=null}return t.prototype.fromJson=function(t){var e,n;return this.remove=null!==(e=t.remove)&&void 0!==e?e:[],this.group=null!==(n=t.group)&&void 0!==n?n:null,this},t.prototype.asJson=function(){return""},t}()),it=function(){function t(){this.mode=null,this.group=null,this.markers=[]}return t.prototype.fromJson=function(t){var e,n;return this.mode=t.mode,this.markers=null!==(e=t.markers)&&void 0!==e?e:[],this.group=null!==(n=t.group)&&void 0!==n?n:null,this},t.prototype.asJson=function(){return""},t}(),rt=(function(){function t(){}}(),function(){function t(){this.remove=[],this.group=null}return t.prototype.fromJson=function(t){var e,n;return this.remove=null!==(e=t.remove)&&void 0!==e?e:[],this.group=null!==(n=t.group)&&void 0!==n?n:null,this},t.prototype.asJson=function(){return""},t}()),at=function(){function t(){this.mode=null,this.group=null,this.polygons=[]}return t.prototype.fromJson=function(t){var e,n;return this.mode=t.mode,this.polygons=null!==(e=t.polygons)&&void 0!==e?e:[],this.group=null!==(n=t.group)&&void 0!==n?n:null,this},t.prototype.asJson=function(){return""},t}(),st=(function(){function t(){}}(),function(){function t(){this.remove=[],this.group=null}return t.prototype.fromJson=function(t){var e,n;return this.remove=null!==(e=t.remove)&&void 0!==e?e:[],this.group=null!==(n=t.group)&&void 0!==n?n:null,this},t.prototype.asJson=function(){return""},t}()),ut=function(){function t(){this.audioId=null,this.distanceModel=null,this.panningModel=null,this.state=null,this.soundUrl=null}return t.prototype.fromJson=function(t){return this.audioId=t.audio_id,this.distanceModel=t.distance_model,this.panningModel=t.panning_model,this.soundUrl=t.sound_url,this.state=(new lt).fromJson(t.state),this},t.prototype.asJson=function(){return""},t}(),lt=function(){function t(){this.audioId=null,this.x=null,this.y=null,this.z=null,this.orientationX=null,this.orientationY=null,this.orientationZ=null,this.coneInnerAngle=null,this.coneOuterAngle=null,this.coneOuterGain=null,this.maxDistance=null,this.refDistance=null,this.rolloffFactor=null,this.volume=null,this.rate=null,this.playing=null,this.loop=null,this.sync=null,this.fadeOutStartDistance=null,this.fadeOutEndDistance=null}return t.prototype.fromJson=function(t){return this.audioId=t.audio_id,this.x=t.x,this.y=t.y,this.z=t.z,this.orientationX=t.orientation_x,this.orientationY=t.orientation_y,this.orientationZ=t.orientation_z,this.coneInnerAngle=t.cone_inner_angle,this.coneOuterAngle=t.cone_outer_angle,this.coneOuterGain=t.cone_outer_gain,this.maxDistance=t.max_distance,this.refDistance=t.ref_distance,this.rolloffFactor=t.rolloff_factor,this.volume=t.volume,this.rate=t.rate,this.playing=t.playing,this.loop=t.loop,this.sync=t.sync,this.fadeOutStartDistance=t.fade_out_start_distance,this.fadeOutEndDistance=t.fade_out_end_distance,this},t.prototype.asJson=function(){return""},t}(),dt=function(){function t(){this.audioId=null}return t.prototype.fromJson=function(t){return this.audioId=t.audio_id,this},t.prototype.asJson=function(){return""},t}(),ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},pt=[],ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"selfLocation",{get:function(){return this.$audioServer.managedData.location},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapHolder",{get:function(){return this.$parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this.$parent.map},enumerable:!1,configurable:!0}),e.prototype.onSelfLocationUpdated=function(){this.updateForPosition()},e.prototype.updateForPosition=function(){var t;if(null!=this.layer.visibilityAreas&&0!=this.layer.visibilityAreas.length){if(null!=this.selfLocation){var e={x:this.selfLocation.x,y:this.selfLocation.y,z:this.selfLocation.z},n=!1;null===(t=this.layer.visibilityAreas)||void 0===t||t.forEach((function(t){v(t,e)&&(n=!0)})),this.overlay.setOpacity(n?1:0)}}else this.overlay.setOpacity(1)},e.prototype.mounted=function(){var t;this.overlay=y.a.imageOverlay(null!==(t=this.layer.url)&&void 0!==t?t:this.layer.base64,new f["LatLngBounds"](this.mapHolder.xy(this.layer.x,this.layer.z),this.mapHolder.xy(this.layer.x+this.layer.width,this.layer.z+this.layer.height)),{className:"pixelated",zIndex:this.layer.zIndex}).addTo(this.map),this.updateForPosition(),this.mapHolder.addOverlay(this.overlay,this.layer.group)},e.prototype.beforeDestroy=function(){var t;null!=this.overlay&&(this.mapHolder.removeOverlay(this.overlay,this.layer.group),null===(t=this.overlay)||void 0===t||t.remove(),this.overlay=null)},Object(a["a"])([Object(s["b"])()],e.prototype,"layer",void 0),Object(a["a"])([Object(s["d"])("selfLocation")],e.prototype,"onSelfLocationUpdated",null),e=Object(a["a"])([Object(s["a"])({components:{}})],e),e}(s["c"]),ft=ht,yt=ft,mt=Object(P["a"])(yt,ct,pt,!1,null,null,null),vt=mt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},_t=[],bt=n("5729"),Ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"selfLocation",{get:function(){return this.$audioServer.managedData.location},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapHolder",{get:function(){return this.$parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this.$parent.map},enumerable:!1,configurable:!0}),e.prototype.onSelfLocationUpdated=function(){this.updateForPosition()},e.prototype.onDataUpdated=function(){var t,e;this.marker.setLatLng(this.mapHolder.xy(this.data.x,this.data.z)),this.marker.setZIndexOffset(this.data.zIndex),this.data.popupName!=(null===(e=null===(t=this.marker)||void 0===t?void 0:t.getPopup())||void 0===e?void 0:e.getContent())&&(null!=this.data.popupName&&this.marker.bindPopup(this.data.popupName),this.marker.unbindPopup())},e.prototype.updateForPosition=function(){},e.prototype.mounted=function(){null==this.marker?this.recreateMarker():this.onDataUpdated(),this.updateForPosition()},e.prototype.recreateMarker=function(){var t,e;this.removeMarker();var n=null,o=this.data.type;if("twemoji"===o){var i=bt["a"].parse(this.data.url,{className:"twemoji-marker"}),r=y.a.divIcon({html:i,className:this.data.className}),a=r.options;void 0!=this.data.size&&(a.iconSize=g(this.data.size)),void 0!=this.data.anchor&&(a.iconAnchor=g(this.data.anchor)),void 0!=this.data.popupAnchor&&(a.popupAnchor=g(this.data.popupAnchor)),n=r}else{r=new y.a.Icon({iconUrl:null!==(e=null!==(t=this.data.url)&&void 0!==t?t:this.data.base64)&&void 0!==e?e:"https://cdn.iconscout.com/icon/premium/png-256-thumb/place-marker-3-599570.png",className:this.data.className}),a=r.options;void 0!=this.data.size&&(a.iconSize=g(this.data.size)),void 0!=this.data.anchor&&(a.iconAnchor=g(this.data.anchor)),void 0!=this.data.popupAnchor&&(a.popupAnchor=g(this.data.popupAnchor)),n=r}this.marker=y.a.marker(this.mapHolder.xy(this.data.x,this.data.z),{icon:n,zIndexOffset:this.data.zIndex}).addTo(this.map),null!=this.data.popupName&&this.marker.bindPopup(this.data.popupName),this.mapHolder.addMarker(this.marker,this.data.group)},e.prototype.removeMarker=function(){var t;null!=this.marker&&this.map.hasLayer(this.marker)&&(this.mapHolder.removeMarker(this.marker,this.data.group),null===(t=this.marker)||void 0===t||t.remove())},e.prototype.beforeDestroy=function(){this.removeMarker()},Object(a["a"])([Object(s["b"])()],e.prototype,"data",void 0),Object(a["a"])([Object(s["d"])("selfLocation")],e.prototype,"onSelfLocationUpdated",null),Object(a["a"])([Object(s["d"])("data")],e.prototype,"onDataUpdated",null),e=Object(a["a"])([Object(s["a"])({components:{}})],e),e}(s["c"]),wt=Ot,Ct=wt,St=Object(P["a"])(Ct,gt,_t,!1,null,null,null),Pt=St.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},Et=[],At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"selfLocation",{get:function(){return this.$audioServer.managedData.location},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapHolder",{get:function(){return this.$parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this.$parent.map},enumerable:!1,configurable:!0}),e.prototype.onSelfLocationUpdated=function(){this.updateForPosition()},e.prototype.onDataUpdated=function(){},e.prototype.updateForPosition=function(){},e.prototype.mounted=function(){null==this.polygon?this.recreatePolygon():this.onDataUpdated(),this.updateForPosition()},e.prototype.recreatePolygon=function(){var t,e;this.removePolygon(),1==(null===(t=this.data.group)||void 0===t?void 0:t.startsWith("crew"))&&this.mapHolder.setupCrewLayerGroups(),this.polygon=y.a.rectangle(new f["LatLngBounds"](this.mapHolder.xy(this.data.min.x,this.data.min.z),this.mapHolder.xy(this.data.max.x,this.data.max.z)),{color:null!==(e=this.data.fillColor)&&void 0!==e?e:"#ff7800",weight:1}).addTo(this.map),null!=this.data.title&&this.polygon.bindPopup(this.data.title),this.mapHolder.addPolygonOverlay(this.polygon,this.data.group)},e.prototype.removePolygon=function(){var t;null!=this.polygon&&this.map.hasLayer(this.polygon)&&(this.mapHolder.removePolygonOverlay(this.polygon,this.data.group),null===(t=this.polygon)||void 0===t||t.remove())},e.prototype.beforeDestroy=function(){this.removePolygon()},Object(a["a"])([Object(s["b"])()],e.prototype,"data",void 0),Object(a["a"])([Object(s["d"])("selfLocation")],e.prototype,"onSelfLocationUpdated",null),Object(a["a"])([Object(s["d"])("data")],e.prototype,"onDataUpdated",null),e=Object(a["a"])([Object(s["a"])({components:{}})],e),e}(s["c"]),kt=At,xt=kt,Dt=Object(P["a"])(xt,It,Et,!1,null,null,null),Tt=Dt.exports,jt=function(t){function e(){var e=t.call(this)||this;return e.map=null,e.isZooming=!1,e.isDragging=!1,e.isFollowSelf=!0,e.layers=[],e.markers=[],e.polygons=[],e.layerGroups=new Map,e.crewSetup=!1,e}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"fabIcon",{get:function(){return this.isFollowSelf?"gps_fixed":"gps_not_fixed"},enumerable:!1,configurable:!0}),e.prototype.toggleFollowSelf=function(){this.isFollowSelf=!this.isFollowSelf},e.prototype.xy=function(t,e){return y.a.latLng(e,-t)},Object.defineProperty(e.prototype,"players",{get:function(){return this.$audioServer.managedData.players},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this.$audioServer.managedData.location},enumerable:!1,configurable:!0}),e.prototype.onFollowSelfChanged=function(){this.isFollowSelf&&this._updateMap()},e.prototype.onPlayersChanged=function(){this._updateMap()},e.prototype.onLocationChanged=function(){this._updateMap()},e.prototype._onResize=function(){var t;null===(t=this.map)||void 0===t||t.invalidateSize()},e.prototype._updateMap=function(){var t=this.map;if(null!=t){var e=this.location;null!=e&&!this.isDragging&&this.isFollowSelf&&t.panTo(this.xy(e.x,e.z))}},e.prototype.created=function(){var t=this;this.$audioServer.state.$on("packet",(function(e){if(!0!==e.isHandled){var n=e.data;if(e.id===N.ADD_MAP_LAYERS){e.isHandled=!0;var o=(new nt).fromJson(n),i=t.layers;"SET"==o.mode&&(i=null!=o.group?i.filter((function(t){return t.group!==o.group})):[]);var r=new Set(o.layers.map((function(t){return t.id})));i=i.filter((function(t){return!r.has(t.id)})),o.layers.forEach((function(t){return i.push(t)})),t.layers=i}else if(e.id===N.REMOVE_MAP_LAYERS){e.isHandled=!0;var a=(new ot).fromJson(n),s=new Set(a.remove.map((function(t){return t})));t.layers=t.layers.filter((function(t){return!s.has(t.id)})),null!=a.group&&(t.layers=t.layers.filter((function(t){return t.group!=a.group})))}else if(e.id===N.MARKER_ADD){e.isHandled=!0;var u=(new it).fromJson(n),l=t.markers;"SET"==u.mode&&(l=null!=u.group?l.filter((function(t){return t.group!==u.group})):[]);var d=new Set(u.markers.map((function(t){return t.id})));l=l.filter((function(t){return!d.has(t.id)})),u.markers.forEach((function(t){return l.push(t)})),t.markers=l}else if(e.id===N.MARKER_REMOVE){e.isHandled=!0;var c=(new rt).fromJson(n),p=new Set(c.remove.map((function(t){return t})));t.markers=t.markers.filter((function(t){return!p.has(t.id)})),null!=c.group&&(t.markers=t.markers.filter((function(t){return t.group!=c.group})))}else if(e.id===N.POLYGON_OVERLAY_ADD){e.isHandled=!0;var h=(new at).fromJson(n),f=t.polygons;"SET"==h.mode&&(f=null!=h.group?f.filter((function(t){return t.group!==h.group})):[]);var y=new Set(h.polygons.map((function(t){return t.id})));f=f.filter((function(t){return!y.has(t.id)})),h.polygons.forEach((function(t){return f.push(t)})),t.polygons=f}else if(e.id===N.POLYGON_OVERLAY_REMOVE){e.isHandled=!0;var m=(new st).fromJson(n),v=new Set(m.remove.map((function(t){return t})));t.polygons=t.polygons.filter((function(t){return!v.has(t.id)})),null!=m.group&&(t.polygons=t.polygons.filter((function(t){return t.group!=m.group})))}}}))},e.prototype.addOverlay=function(t,e){var n;null!=e&&(null===(n=this.layerGroups.get(e))||void 0===n||n.addLayer(t))},e.prototype.removeOverlay=function(t,e){var n;null!=e&&(null===(n=this.layerGroups.get(e))||void 0===n||n.removeLayer(t))},e.prototype.addMarker=function(t,e){var n;null!=e&&(null===(n=this.layerGroups.get(e))||void 0===n||n.addLayer(t))},e.prototype.removeMarker=function(t,e){var n;null!=e&&(null===(n=this.layerGroups.get(e))||void 0===n||n.removeLayer(t))},e.prototype.addPolygonOverlay=function(t,e){var n,o;if(null!=e){var i=this.layerGroups.get(e);null!=i&&(i.addLayer(t),1!=(null===(n=this.map)||void 0===n?void 0:n.hasLayer(i))&&(null===(o=this.map)||void 0===o||o.removeLayer(t)))}},e.prototype.removePolygonOverlay=function(t,e){var n;null!=e&&(null===(n=this.layerGroups.get(e))||void 0===n||n.removeLayer(t))},e.prototype.mounted=function(){var t=this;window.addEventListener("resize",this._onResize),this._updateMap();var e=y.a.map("map",{crs:y.a.CRS.Simple,minZoom:0,maxZoom:3,zoomDelta:.3,zoomSnap:0,center:[0,0],attributionControl:!1});this.map=e,e.setView(this.xy(90,-960),2),e.on("zoomstart",(function(e){t.isZooming=!0})),e.on("zoomend",(function(e){t.isZooming=!1,t._updateMap()})),e.on("dragstart",(function(e){t.isDragging=!0,t.isFollowSelf=!1})),e.on("dragend",(function(e){t.isDragging=!1,t._updateMap()})),y.a.tileLayer("/tiles/world/{z}/{x}/{y}.png",{tileSize:256*y.a.CRS.Simple.scale(1),minNativeZoom:1,maxNativeZoom:1,className:"pixelated"}).addTo(e),this.layerGroups.set("interior",y.a.layerGroup([]).addTo(e)),this.layerGroups.set("shop",y.a.layerGroup([]).addTo(e)),this.layerGroups.set("ride",y.a.layerGroup([]).addTo(e)),this.layerGroups.set("parktrain",y.a.layerGroup([]).addTo(e)),this.layerGroups.set("poi",y.a.layerGroup([]).addTo(e)),this.layerControls=y.a.control.layers({},{"Interiors (early test)":this.layerGroups.get("interior"),"Rides (early test)":this.layerGroups.get("ride"),"Stores (early test)":this.layerGroups.get("shop"),"POIs (early test)":this.layerGroups.get("poi"),"Park Train (early test)":this.layerGroups.get("parktrain")}).addTo(e),this._waitForHeight()},e.prototype.setupCrewLayerGroups=function(){var t;if(!this.crewSetup){this.crewSetup=!0;var e=y.a.layerGroup([]);this.layerGroups.set("crew_worldborder",e.addTo(this.map)),null===(t=this.layerControls)||void 0===t||t.addOverlay(e,"[Crew] World Border"),e.removeFrom(this.map)}},e.prototype._waitForHeight=function(){var t=this;requestAnimationFrame((function(){var e,n=t.$el.offsetHeight;0==n?t._waitForHeight():null===(e=t.map)||void 0===e||e.invalidateSize()}))},e.prototype.beforeDestroy=function(){window.removeEventListener("resize",this._onResize)},Object(a["a"])([Object(s["d"])("isFollowSelf")],e.prototype,"onFollowSelfChanged",null),Object(a["a"])([Object(s["d"])("players")],e.prototype,"onPlayersChanged",null),Object(a["a"])([Object(s["d"])("location")],e.prototype,"onLocationChanged",null),e=Object(a["a"])([Object(s["a"])({components:{PolygonOverlayView:Tt,MapMarkerView:Pt,MapLayerView:vt,PlayerAvatar:L}})],e),e}(s["c"]),Rt=jt,Mt=Rt,Lt=(n("b7a2"),Object(P["a"])(Mt,A,k,!1,null,"80bf9d32",null)),Nt=Lt.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audioControls"},[n("md-card",{directives:[{name:"show",rawName:"v-show",value:t.isVerified,expression:"isVerified"}]},[n("md-card-header",[n("div",{staticClass:"md-title"},[t._v("Welcome to Craftventure!")])]),n("md-card-content",[n("div",{staticClass:"md-layout"},[n("p",{staticClass:"md-layout-item md-body-1  md-size-100"},[t._v(" You connected with the AudioServer, you can go back to Minecraft now! ")]),n("md-field",[n("label",{attrs:{for:"theme"}},[t._v("Theme")]),n("md-select",{attrs:{name:"theme",id:"theme","md-dense":""},model:{value:t.theme,callback:function(e){t.theme=e},expression:"theme"}},[n("md-option",{attrs:{value:"cv-light"}},[t._v("Light")]),n("md-option",{attrs:{value:"cv-dark"}},[t._v("Dark")])],1)],1),t._l(t.sliders,(function(e){return[0!=e.visible?n("div",{key:e.name,staticClass:"md-layout-item md-body-1  md-size-100"},[n("div",{staticClass:"label"},[n("md-icon",[t._v("volume_up")]),n("span",{staticClass:"md-body-1"},[t._v(t._s(e.name))])],1),n("VueSlider",{staticClass:"volume-slider",attrs:{type:"range",min:0,max:100,"tooltip-formatter":function(t){return t+"%"}},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"slider.value"}})],1):t._e()]}))],2)]),n("md-card-actions",[n("md-button",{on:{click:t.disconnect}},[t._v("Disconnect")])],1)],1)],1)},Jt=[],zt=n("4971"),Ft=n.n(zt),Vt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.theme=e.$localConfig.config.theme||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"cv-dark":"cv-light"),e}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"isVerified",{get:function(){return this.$audioServer.state.isVerified},enumerable:!1,configurable:!0}),e.prototype.onThemeChanged=function(t){this.$localConfig.config.theme=t,this.$material.theming.theme=t},Object.defineProperty(e.prototype,"sliders",{get:function(){return this.$audioServer.state.volume},enumerable:!1,configurable:!0}),e.prototype.disconnect=function(){this.$audioServer.disconnect()},e.prototype.mounted=function(){this.$material.theming.theme=this.theme},Object(a["a"])([Object(s["d"])("theme")],e.prototype,"onThemeChanged",null),e=Object(a["a"])([Object(s["a"])({components:{VueSlider:Ft.a}})],e),e}(s["c"]),Ut=Vt,Ht=Ut,Gt=(n("e69e"),Object(P["a"])(Ht,$t,Jt,!1,null,"0d7958c2",null)),Wt=Gt.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"photoFeed"},[n("md-card",[n("md-card-header",[n("div",{staticClass:"md-title"},[t._v("Photo feed")])]),n("md-card-content",[n("div",{staticClass:"md-layout"},[n("p",{staticClass:"md-layout-item md-body-1 md-size-100"},[t._v(" At several locations within the parks (currently only for some rides), pictures are taken which will appear right here in this feed. This includes but is not limited to for example Fenrir, Space Mountain and Agua Azul. Click on the pictures to download them. ")]),t._l(t.photos,(function(e){return[n("div",{key:e.time,staticClass:"md-layout-item parkPhotoItem"},[n("a",{attrs:{href:"data:image/png;base64,"+e.data,download:e.name+"_"+e.type.toLocaleLowerCase()+"_at_"+e.time+".png"}},[n("img",{staticClass:"parkPhotoInstance",attrs:{src:"data:image/png;base64,"+e.data}})]),n("p",{staticClass:"md-subheading"},[t._v(t._s(t.photoTypeNameConverter(e.type)+": "+e.name))])])]}))],2)])],1)],1)},qt=[],Kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"photos",{get:function(){return this.$audioServer.managedData.parkPhotos},enumerable:!1,configurable:!0}),e.prototype.photoTypeNameConverter=function(t){return"ONRIDE_PICTURE"===t?"Onride picture":t},e=Object(a["a"])([Object(s["a"])({components:{}})],e),e}(s["c"]),Zt=Kt,Bt=Zt,Qt=(n("82df"),Object(P["a"])(Bt,Yt,qt,!1,null,"42a1e717",null)),Xt=Qt.exports,te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"operatorControls"},[n("md-card",[n("md-card-header",{directives:[{name:"show",rawName:"v-show",value:0===t.ridesSorted.length,expression:"ridesSorted.length === 0"}]},[n("div",{staticClass:"md-title"},[t._v("Operator controls")])]),n("md-card-content",[n("div",{staticClass:"md-layout"},[n("p",{directives:[{name:"show",rawName:"v-show",value:0===t.ridesSorted.length,expression:"ridesSorted.length === 0"}],staticClass:"md-layout-item md-body-1 md-size-100"},[t._v(" Ride operating is a mode available to VIPs. If you're a VIP, just start operating any of the available rides using '/rideop' and the operator panel of that ride will appear here ")]),t._l(t.ridesSorted,(function(e){return n("div",{key:e.id,staticClass:"md-layout-item md-size-100"},[n("h1",[t._v(t._s(e.state.name))]),t._l(e.state.operatorSlots,(function(o){return n("OperatorSlot",{key:e.id+o.slot,attrs:{"operator-slot":o},nativeOn:{click:function(e){return t.onOperatorSlotClicked(o)}}})})),t._l(e.state.controls,(function(o){return[null===o.state.group?n("OperatorControl",{key:e.id+o.id,attrs:{"operator-control":o},nativeOn:{click:function(e){return t.onControlClicked(o)}}}):t._e()]})),t._l(e.getControlGroups(),(function(o){return[n("div",{key:e.id+o[0],staticClass:"operator-control-group"},[n("h3",[t._v(t._s(o[1].charAt(0).toUpperCase()+o[1].substring(1)))]),t._l(e.state.controls,(function(i){return[i.state.group===o[0]?n("OperatorControl",{key:e.id+i.id+o[0],attrs:{"operator-control":i},nativeOn:{click:function(e){return t.onControlClicked(i)}}}):t._e()]}))],2)]}))],2)}))],2)])],1)],1)},ee=[],ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.operatorSlot,expression:"operatorSlot != null"}],staticClass:"operator-panel-operator-slot"},[n("div",{staticClass:"ride-name"},[n("span",{staticClass:"tag"},[t._v("Operator "+t._s(null!==t.operatorSlot?"#"+(t.operatorSlot.slot+1):""))])]),n("div",{staticClass:"button",style:{backgroundImage:"url("+t.background+")"}})])},oe=[],ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"background",{get:function(){return null==this.operatorSlot?null:null!=this.operatorSlot.state.uuid?"https://crafatar.com/avatars/"+this.operatorSlot.state.uuid+"?size=128":n("4890")},enumerable:!1,configurable:!0}),Object(a["a"])([Object(s["b"])()],e.prototype,"operatorSlot",void 0),e=Object(a["a"])([Object(s["a"])({components:{}})],e),e}(s["c"]),re=ie,ae=re,se=Object(P["a"])(ae,ne,oe,!1,null,"f742df0c",null),ue=se.exports,le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.operatorControl,expression:"operatorControl != null"}],staticClass:"operator-panel-control",attrs:{"data-enabled":t.dataEnabled,"data-kind":t.dataKind,"data-on":t.dataOn,"data-flashing":t.flashing,"data-type":t.dataType}},[n("div",{staticClass:"ride-name"},[n("span",{staticClass:"tag"},[t._v(t._s(t.operatorControl.state.name.replace(/§[0-9A-FK-OR]/gm,"")))])]),n("div",{staticClass:"button"})])},de=[],ce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"dataEnabled",{get:function(){var t=this.operatorControl;return null===t?null:t.state.isEnabled.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataKind",{get:function(){var t=this.operatorControl;return null===t?null:t.state.kind},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataOn",{get:function(){var t=this.operatorControl;if(null===t)return null;var e=this.dataKind;return"led"===e?("green"===t.state.data.color).toString():"switch"===e&&null!==t.state.data.on?t.state.data.on.toString():null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flashing",{get:function(){var t=this.operatorControl;return null===t?null:t.state.data.flashing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataType",{get:function(){var t=this.operatorControl;return null===t?null:t.state.data.type},enumerable:!1,configurable:!0}),Object(a["a"])([Object(s["b"])()],e.prototype,"operatorControl",void 0),e=Object(a["a"])([Object(s["a"])({components:{}})],e),e}(s["c"]),pe=ce,he=pe,fe=Object(P["a"])(he,le,de,!1,null,"5e28ec74",null),ye=fe.exports;function me(t){return me="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function ve(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ge(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function ge(t,e){if(t){if("string"===typeof t)return _e(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(t,e):void 0}}function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function we(t,e,n){return e&&Oe(t.prototype,e),n&&Oe(t,n),t}function Ce(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}function Se(t,e){return Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Se(t,e)}function Pe(t){var e=Ae();return function(){var n,o=ke(t);if(e){var i=ke(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return Ie(this,n)}}function Ie(t,e){if(e&&("object"===me(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ee(t)}function Ee(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ae(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function ke(t){return ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ke(t)}var xe,De,Te=(_=Object(s["a"])({components:{OperatorSlot:ue,OperatorControl:ye}}),_(b=function(t){Ce(n,t);var e=Pe(n);function n(){return be(this,n),e.apply(this,arguments)}return we(n,[{key:"onControlClicked",value:function(t){this.$audioServer.send((new Q).set(t.ride.id,t.id).asJson())}},{key:"onOperatorSlotClicked",value:function(t){this.$audioServer.send((new Q).set(t.ride.id,t.slot).asJson())}},{key:"selfUuid",get:function(){return this.$audioServer.state.verifiedUuid}},{key:"rides",get:function(){return this.$operatorManager.state.rides}},{key:"ridesSorted",get:function(){var t,e=this.rides,n=this.selfUuid,o=[],i=[],r=ve(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.isOperator(n)?o.push(a):a.state.forceDisplay&&i.push(a)}}catch(s){r.e(s)}finally{r.f()}return o.concat(i)}}]),n}(s["c"]))||b),je=Te,Re=(n("65f4"),n("9399"),Object(P["a"])(je,te,ee,!1,null,"65f5d54e",null)),Me=Re.exports,Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"playingFeed"},[n("md-card",[n("md-card-header",[n("div",{staticClass:"md-title"},[t._v("Now Playing")])]),n("md-card-content",[n("div",{staticClass:"md-layout"},[n("p",{staticClass:"md-body-1"},[t._v(" In this tab we'll display the songs that are currently playing. For many songs, we'll also provide links to Spotify/YouTube so you can listen/buy them. Many of the songs we use are also on our Spotify list: "),n("a",{attrs:{href:"spotify:playlist:3Z2venyZi2DygOJzfiF9bO"}},[t._v("spotify:playlist:3Z2venyZi2DygOJzfiF9bO")])]),n("p",{staticClass:"md-body-1"},[t._v(" Let us know about any mistakes and/or missing information on our Discord: "),n("a",{attrs:{href:"https://discord.craftventure.net"}},[t._v("discord.Craftventure.net")])]),t._l(t.areas,(function(e){return[e.state.shouldDisplay?n("div",{key:e.id,staticClass:"feedItem area-item"},[n("p",{staticClass:"md-subheading"},[t._v(t._s(e.cleanName()))]),e.hasDescribableResources()?t._e():n("div",{staticClass:"md-body-1"},[t._v("Unknown songs")]),t._l(e._resources,(function(e,o){return[null!=e.describe()?n("div",{key:e.resource.location,staticClass:"md-body-1 resource-item"},[t._v(" "+t._s(o+1)+": "),n("a",{attrs:{target:"_blank",href:e.resource.spotify_uri||e.resource.listen_url}},[t._v(" "+t._s(e.describe())+" ")]),e.state.playing?n("md-icon",{staticClass:"uninteractable"},[t._v(" play_arrow ")]):t._e()],1):t._e()]}))],2):t._e()]}))],2)])],1)],1)},Ne=[];function $e(t){return $e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(t)}function Je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ze(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Fe(t,e,n){return e&&ze(t.prototype,e),n&&ze(t,n),t}function Ve(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}function Ue(t,e){return Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ue(t,e)}function He(t){var e=Ye();return function(){var n,o=qe(t);if(e){var i=qe(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return Ge(this,n)}}function Ge(t,e){if(e&&("object"===$e(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return We(t)}function We(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ye(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function qe(t){return qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qe(t)}var Ke=(xe=Object(s["a"])({components:{}}),xe(De=function(t){Ve(n,t);var e=He(n);function n(){return Je(this,n),e.apply(this,arguments)}return Fe(n,[{key:"areas",get:function(){return this.$areaManager.state.$data.areaGetter()}},{key:"disconnect",value:function(){this.$audioServer.disconnect()}},{key:"photoTypeNameConverter",value:function(t){return"ONRIDE_PICTURE"===t?"Onride picture":t}}]),n}(s["c"]))||De),Ze=Ke,Be=(n("0a0e"),Object(P["a"])(Ze,Le,Ne,!1,null,"5aff0735",null)),Qe=Be.exports,Xe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.activeItem="tab-feed",e.activeItemId=e.activeItem,e}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"isVerified",{get:function(){return this.$audioServer.state.isVerified},enumerable:!1,configurable:!0}),e.prototype.onActiveItemChanged=function(){this._updatePage()},e.prototype._onPageChanged=function(t){this.activeItem=t},e.prototype._updatePage=function(){this.activeItemId=this.activeItem.replace("tab","page")},e.prototype.mounted=function(){this._updatePage()},Object(a["a"])([Object(s["d"])("activeItem")],e.prototype,"onActiveItemChanged",null),e=Object(a["a"])([Object(s["a"])({components:{NowPlayingFeed:Qe,OperatorControls:Me,PhotoFeed:Xt,AudioControls:Wt,LiveMap:Nt,LoginForm:E}})],e),e}(s["c"]),tn=Xe,en=tn,nn=(n("5c0b"),n("d354"),Object(P["a"])(en,i,r,!1,null,"af290f5c",null)),on=nn.exports,rn=function(){function t(){var t,e=this;this._ws=null,this.state=new o["default"]({data:{isVerified:!1,isConnected:!1,isConnecting:!1,dateCorrection:0,url:"wss://audiotunnel.craftventure.net:8887",username:null,authCode:null,verifiedUuid:null,disconnectedMessage:null,lastSendTime:null,volume:{master:{name:"Master",value:50},music:{name:"Music",value:100},effect:{name:"Effects",value:100},ambient:{name:"Ambient",value:100,visible:!1}}}}),this.managedData=new o["default"]({data:{players:[],location:null,parkPhotos:[]}}),this.audioContext=new(null!==(t=window.AudioContext)&&void 0!==t?t:window.webkitAudioContext),this.managedData.$watch("location",(function(t){e.managedData.$areaManager.updateFilters()}));var n=function(t){i.state.$watch("volume."+t+".value",(function(n){e.send((new W).set(n/100,t).asJson())}))},i=this;for(var r in this.state.volume)n(r);this.state.$watch("volume",(function(t){}))}return t.prototype._resetManagedData=function(){this.managedData.players=[],this.managedData.location=null,this.managedData.parkPhotos=[]},t.prototype._resetState=function(){this._resetManagedData(),this.state.dateCorrection=0,this.state.isConnecting=!1,this.state.isVerified=!1,this.state.lastSendTime=null,this.state.verifiedUuid=null},t.prototype.connect=function(t,e,n){var o=this;this.state.isConnected||(this._resetState(),null!=this._ws&&(this._ws.close(),this._ws=null),this.state.disconnectedMessage=null,this.state.username=t,this.state.authCode=e,this.state.isConnecting=!0,this._ws=new WebSocket(n||this.state.url||"wss://audiotunnel.craftventure.net:8887"),this._ws.onopen=function(){o.state.isConnected=!0,o._onOpen()},this._ws.onmessage=function(t){o._onMessage(t)},this._ws.onerror=function(t){o._onError(t)},this._ws.onclose=function(t){o.state.isConnected=!1,o._onClose(t)})},t.prototype.send=function(t){null!=this._ws&&this._ws.send(t)},t.prototype._sendPing=function(){this.state.lastSendTime=(new Date).getTime(),this.send((new G).set(this.state.lastSendTime).asJson())},t.prototype._onOpen=function(){var t=this;this.send((new J).set(this.state.username,this.state.authCode).asJson()),this._heartBeatInterval=setInterval((function(){t._sendPing()}),5e3)},t.prototype._onMessage=function(t){this._handlePacket(t)},t.prototype._handlePacket=function(t){var e,n,o;try{var i=JSON.parse(t.data);if("undefined"!==typeof i.id)if(i.id===N.KICK){var r=(new z).fromJson(i);this.state.disconnectedMessage=r.message,null===(e=this._ws)||void 0===e||e.close()}else if(i.id===N.CLIENT_ACCEPTED){this.state.isConnecting=!1;r=(new F).fromJson(i);this.state.verifiedUuid=r.uuid,this.state.dateCorrection=(new Date).getTime()-r.sendTime,this.state.isVerified=!0}else if(i.id===N.KEY_VALUE);else if(i.id===N.PING){r=(new G).fromJson(i);this.state.dateCorrection=(new Date).getTime()-r.sendTime}else if(i.id===N.LOCATION_UPDATE){r=(new Y).fromJson(i);this.managedData.location={x:r.x,y:r.y,z:r.z,yaw:r.yaw,pitch:r.pitch};var a=this.managedData.players;if(null!=a)for(var s=0,u=a;s<u.length;s++){var l=u[s];if(null!=l.uuid&&l.uuid===this.state.verifiedUuid){l.x=r.x,l.y=r.y,l.z=r.z;break}}}else if(i.id===N.PARK_PHOTO){r=(new tt).fromJson(i);this.managedData.parkPhotos.push(r)}else if(i.id===N.VOLUME){r=(new W).fromJson(i);if(null!=r.type)try{var d=this.state.volume;d[r.type].value=100*r.volume}catch(f){}else this.state.volume.master.value=100*r.volume}else if(i.id===N.PLAYER_LOCATIONS){r=(new et).fromJson(i);this.managedData.players=r.players}else{var c=new an(i,t.data);this.state.$emit("packet",c);try{if(!1===c.isHandled){var p=null;for(var h in N)if(N[h]==i.id){p=h;break}console.warn("Packet received with id "+i.id+" (name="+(null!==p&&void 0!==p?p:"UNKNOWN")+") that went unhandled by any extensions")}}catch(f){console.error(f)}}else null===(n=this._ws)||void 0===n||n.close(),console.error("Packet has no ID: "+JSON.stringify(t.data)),this.state.disconnectedMessage="Packet received that has no ID"}catch(f){console.error(f),null===(o=this._ws)||void 0===o||o.close(),this.state.disconnectedMessage="Failed to parse received packet"}},t.prototype._onError=function(t){this.state.disconnectedMessage="An error occured somewhere. Blame Joeywp for not handling this correctly."},t.prototype._onClose=function(t){clearInterval(this._heartBeatInterval),this._resetState(),this._ws=null},t.prototype.disconnect=function(){null!=this._ws&&this._ws.close()},t}(),an=function(){function t(t,e){this.isHandled=!1,this.id=t.id,this.data=t,this.rawData=e}return t}(),sn=new rn,un=sn,ln=n("43f9"),dn=n.n(ln),cn=(n("51de"),{REPEAT_SEQUENCE:"REPEAT_SEQUENCE",PLAY_ONCE:"PLAY_ONCE"}),pn=function(){function t(t,e){var n=this;this.state=new o["default"]({data:{ready:!1,duration:0,playWhenReady:!1,playing:!1}}),this.audioContext=e.audioContext,this.gainNode=this.audioContext.createGain(),this.resource=t,this.audio=new Audio(t.location),this.audio.crossOrigin="anonymous",m()&&this.audio.load(),this.source=this.audioContext.createMediaElementSource(this.audio),this.source.connect(e.startNode),this.audio.ondurationchange=function(){var t=null!==n.state.duration&&0!==n.state.duration;t||(n.state.duration=n.audio.duration)},this.audio.oncanplay=function(){n.state.ready||(n.state.ready=!0)},this.audio.onplaying=function(){n.state.playing||(n.state.playing=!0)},this.audio.onpause=function(){n.state.playing&&(n.state.playing=!1)},this.audio.onended=function(){(n.state.playing||n.state.playWhenReady)&&(n.state.playing=!1,n.state.playWhenReady=!1)},this.audio.onstalled=function(){n.state.ready=!0,n.state.duration=0},this.audio.volume=1,this.audio.preload="metadata"}return t.prototype.load=function(){var t;null===(t=this.audio)||void 0===t||t.load()},t.prototype.describe=function(){return null!=this.resource.artist&&null!=this.resource.name?this.resource.artist+" - "+this.resource.name:null!=this.resource.artist?this.resource.artist:null!=this.resource.name?this.resource.name:null},t.prototype.syncToMs=function(t){if(this.audio){var e=t/1e3;(e>this.audio.currentTime+.1||e<this.audio.currentTime-.1)&&(this.audio.currentTime=e)}},t.prototype.getDurationInMs=function(){return 1e3*this.state.duration},t.prototype.play=function(){if(!this.state.playWhenReady)return this.state.playWhenReady=!0,null!=this.audio&&(this.audio.play(),!0)},t.prototype.pause=function(){if(this.state.playWhenReady)return this.state.playWhenReady=!1,null!=this.audio&&(this.audio.pause(),!0)},t.prototype.clean=function(){var t;null!=this.audio&&(null===(t=this.source)||void 0===t||t.disconnect(),this.audio.pause(),this.audio=void 0)},t}(),hn=pn,fn={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},yn=function(){function t(t,e){if(this.audioContext=t,this.config=e,this.areas=e.areas.map((function(t){return new vn(t,e.feather)})),"biquad"==e.kind){var n=t.createBiquadFilter();n.type=e.type,this.audioNode=n}else this.audioNode=t.createGain();this.audioNode.connect(t.destination),this.update()}return t.prototype.update=function(){var t=0;if(this.areas.forEach((function(e){var n=e.enabledPercentage;n>t&&(t=n)})),"biquad"==this.config.kind){var e=this.audioNode;if(null!=this.config.easing){var n=fn[this.config.easing];null!=n&&(t=n(t))}if(null!=this.config.frequency){var o=Math.max(this.config.frequency.inactive,e.frequency.minValue),i=Math.min(this.config.frequency.active,e.frequency.maxValue);e.frequency.value=o+(i-o)*t}if(null!=this.config.q){var r=Math.max(this.config.q.inactive,e.frequency.minValue),a=Math.min(this.config.q.active,e.frequency.maxValue);e.Q.value=r+(a-r)*t}if(null!=this.config.gain){var s=Math.max(this.config.gain.inactive,e.gain.minValue),u=Math.min(this.config.gain.active,e.gain.maxValue);e.gain.value=s+(u-s)*t}}},t.prototype.release=function(){this.audioNode.disconnect()},t}(),mn=yn,vn=function(){function t(t,e){this.area=t,this.feather=e}return Object.defineProperty(t.prototype,"enabledPercentage",{get:function(){var t=this.currentDistance;return t<=0?0:t>this.feather?1:t/this.feather},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentDistance",{get:function(){var t=s["c"].prototype.$audioServer.managedData.location,e=t.x,n=t.y,o=t.z;if(e>this.area.min.x&&e<this.area.max.x&&n>this.area.min.y&&n<this.area.max.y&&o>this.area.min.z&&o<this.area.max.z){var i=e-this.area.min.x,r=this.area.max.x-e,a=n-this.area.min.y,u=this.area.max.y-n,l=o-this.area.min.z,d=this.area.max.z-o;return Math.min(i,r,a,u,l,d)}return 0},enumerable:!1,configurable:!0}),t}();var gn,_n=function(){function t(t,e){var n=this;this.state=new o["default"]({data:{hasFinished:!1,playing:!1,playWhenReady:!1,resourcesReady:!1,isOverridden:!1},computed:{_dateCorrection:function(){return this.$audioServer.state.dateCorrection},shouldDisplay:function(){return n.state.$data.playing&&!n.state.$data.hasFinished}}}),this._hasLoadedAllResource=!1,this.filters=[],this.audioContext=o["default"].prototype.$audioServer.audioContext,this.startNode=this.audioContext.createGain(),this._areaManager=e,this.areaId=t.areaId||-1,this.name=t.name,this.displayName=t.displayName,this._resources=[],this._overrides=t.overrides||[],this._fadeTime=t.fadeTime||0,this._sync=t.sync||0,this._baseVolume=t.volume||1,this._repeatType=t.repeatType||cn.REPEAT_SEQUENCE,this._areaDefinitionPacket=t,this.filters=t.filters.map((function(t){return new mn(n.audioContext,t)})),this.filters.length>0?this.startNode.connect(this.filters[0].audioNode):this.startNode.connect(this.audioContext.destination),this._fadeMultiply=0,this._isSyncing=!1,this._fadeTask=null,this.state.$watch("dateCorrection",(function(){n._triggerDateCorrectionUpdate(),n._resync()}),{immediate:!0}),this.state.$watch((function(t){t.resourcesReady&&n._resync();for(var e=0,o=n._overrides;e<o.length;e++){var i=o[e],r=n._areaManager.getAreaByName(i);r&&r._resync()}n._triggerDateCorrectionUpdate()})),this._areaManager.audioServer.state.$watch("volume",(function(t){n._updateResourceVolume()}),{deep:!0,immediate:!0});for(var i=0,r=t.resources||[];i<r.length;i++){var a=r[i],s=new hn(a,this);this._resources.push(s)}for(var u=function(t){t.state.$watch((function(){n._onResourceStateChanged(t)}),(function(){}))},l=0,d=this._resources;l<d.length;l++){s=d[l];u(s)}this.updateFilters()}return t.prototype.updateFilters=function(){(this.state.playing||this.state.playWhenReady)&&this.filters.forEach((function(t){return t.update()}))},t.prototype.hasDescribableResources=function(){for(var t=0,e=this._resources;t<e.length;t++){var n=e[t];if(null!=n.describe())return!0}return!1},t.prototype.cleanName=function(){return(this.displayName||this.name).replace(/_/g," ").replace(/^\w/,(function(t){return t.toUpperCase()}))},t.prototype._triggerDateCorrectionUpdate=function(){this.state.playing},t.prototype._onResourceStateChanged=function(t){for(var e=this._resources.length>0,n=0,o=this._resources;n<o.length;n++){var i=o[n];if(!i.state.ready){e=!1;break}}this.state.resourcesReady!==e&&(this._hasLoadedAllResource=e,this.state.resourcesReady=e),this._resync()},t.prototype._resync=function(){if(this._hasLoadedAllResource&&this.state.playWhenReady&&!this._isSyncing){this._isSyncing=!0;var t=this._areaManager.isCurrentlyOverridden(this.name);if(t)return this.state.isOverridden||(this.state.isOverridden=!0,this._updatePlayingState()),this._isSyncing=!1,void(this.state.hasFinished&&(this.state.hasFinished=!1));this.state.isOverridden&&(this.state.isOverridden=!1,this._updatePlayingState());var e=this._sync+this.state._dateCorrection,n=0;while(n<1e6){for(var o=0,i=0,r=this._resources;i<r.length;i++){var a=r[i],s=a.getDurationInMs(),u=(new Date).getTime();if(e+s>u){a.play(),a.syncToMs(u-e);for(var l=0,d=this._resources;l<d.length;l++){var c=d[l];c!=a&&c.pause()}return this._isSyncing=!1,void(this.state.hasFinished&&(this.state.hasFinished=!1))}e+=s,o+=s}if(0===o){this.state.playWhenReady=!1;for(var p=0,h=this._resources;p<h.length;p++){a=h[p];a.pause()}return this._isSyncing=!1,void(this.state.hasFinished&&(this.state.hasFinished=!1))}if(this._repeatType!==cn.REPEAT_SEQUENCE){for(var f=0,y=this._resources;f<y.length;f++){a=y[f];a.pause()}return this._isSyncing=!1,void(this.state.hasFinished=!0)}n++}this._isSyncing=!1,this.state.hasFinished||(this.state.hasFinished=!0)}},t.prototype.setSync=function(t){this._sync=t,this._resync()},t.prototype._updateResourceVolume=function(){var t=this._baseVolume*this._fadeMultiply*(this._areaManager.audioServer.state.volume.master.value/100)*(this._areaManager.audioServer.state.volume.music.value/100);if(this.startNode.gain.value=t,0===t)for(var e=0,n=this._resources;e<n.length;e++){var o=n[e];o.pause()}},t.prototype._updatePlayingState=function(){if(!this.state.playWhenReady||this.state.isOverridden||this.state.playing){if((!this.state.playWhenReady||this.state.isOverridden)&&this.state.playing){this.state.playing=!1;t=this._fadeTime*(1-(1-this._fadeMultiply))*2;this._fadeAudioTo(0,t)}}else{this.state.playing=!0;var t=this._fadeTime*(1-this._fadeMultiply)*2;this._resync(),this._fadeAudioTo(1,t)}},t.prototype._fadeAudioTo=function(t,e){var n=this;null!=this._fadeTask&&clearInterval(this._fadeTask);var o=this._fadeMultiply;if(t!==o){var i=(new Date).getTime(),r=(new Date).getTime()+e,a=t-o;this._fadeTask=setInterval((function(){var o=(new Date).getTime();if(o>=r)n._fadeMultiply=t,null!=n._fadeTask&&clearInterval(n._fadeTask);else{var s=(o-i)/e,u=t+(1-s)*-a;n._fadeMultiply=u>1?1:u<0?0:u}n._updateResourceVolume()}),10)}},t.prototype.isPlayWhenReady=function(){return this.state.playWhenReady},t.prototype.isPlayingOrPlayWhenReady=function(){return this.state.playWhenReady||this.state.playing},t.prototype.play=function(){this.state.playWhenReady||(this.state.playWhenReady=!0,this._updatePlayingState(),this._areaManager.audioServer.send((new q).set(this._areaDefinitionPacket).asJson()))},t.prototype.pause=function(){this.state.playWhenReady&&(this.state.playWhenReady=!1,this._updatePlayingState())},t.prototype.clean=function(){this.filters.forEach((function(t){return t.release()}));for(var t=0,e=this._resources;t<e.length;t++){var n=e[t];n.clean()}null!=this._fadeTask&&clearInterval(this._fadeTask)},t}(),bn=_n,On=function(){function t(t){var e=this;this.state=new o["default"]({data:{areaGetter:function(){return[]}},computed:{_dateCorrection:function(){return this.$audioServer.state.dateCorrection}}}),this.audioServer=t,this._areas=[],t.state.$on("packet",(function(t){if(!0!==t.isHandled){var n=t.data;if(t.id===N.AREA_DEFINITION){t.isHandled=!0;var o=(new V).fromJson(n);e._addAreaFromPacket(o)}else if(t.id===N.AREA_STATE){t.isHandled=!0;o=(new U).fromJson(n);e._setAreaState(o)}else if(t.id===N.SYNC){t.isHandled=!0;o=(new H).fromJson(n);e._syncAreaFromPacket(o)}else t.id===N.RELOAD&&(t.isHandled=!0,e._clean())}})),t.state.$watch("isConnected",(function(t){t||e._clean()})),window.debugMessage=function(){return e.debugMessage()}}return t.prototype.updateFilters=function(){this._areas.forEach((function(t){return t.updateFilters()}))},t.prototype.debugMessage=function(){for(var t=[],e=0,n=this._areas;e<n.length;e++){var o=n[e],i={};i.name=o.name,i.sync=o._sync,i.syncing=o._isSyncing,i.state=o.state;for(var r=[],a=0,s=o._resources;a<s.length;a++){var u=s[a],l={},d=u.resource.location.split("/");l.resourceName=d[d.length-1],l.state=u.state;var c=u.audio,p={};p.currentTime=null===c||void 0===c?void 0:c.currentTime,p.duration=null===c||void 0===c?void 0:c.duration,p.ended=null===c||void 0===c?void 0:c.ended,p.error=null===c||void 0===c?void 0:c.error,p.buffered=null===c||void 0===c?void 0:c.buffered,p.paused=null===c||void 0===c?void 0:c.paused,p.networkState=null===c||void 0===c?void 0:c.networkState,p.readyState=null===c||void 0===c?void 0:c.readyState,p.seeking=null===c||void 0===c?void 0:c.seeking,p.volume=null===c||void 0===c?void 0:c.volume,l.audio=p,r.push(l)}i.resources=r,t.push(i)}return t},t.prototype.isCurrentlyOverridden=function(t){for(var e=0,n=this._areas;e<n.length;e++){var o=n[e];if(o.state.playWhenReady&&!o.state.hasFinished&&o.name!==t&&(o._overrides.indexOf(t)>=0||o._overrides.indexOf("*")>=0))return!0}return!1},t.prototype.getAreaByName=function(t){for(var e=0,n=this._areas;e<n.length;e++){var o=n[e];if(o.name===t)return o}return null},t.prototype._clean=function(){for(var t=this,e=0,n=this._areas;e<n.length;e++){var o=n[e];o.clean()}this._areas=[],this.state.$data.areaGetter=function(){return t._areas}},t.prototype._syncAreaFromPacket=function(t){for(var e=0,n=this._areas;e<n.length;e++){var o=n[e];if(o.areaId===t.areaId)return void o.setSync(t.sync)}},t.prototype._addAreaFromPacket=function(t){for(var e=this,n=0,o=this._areas;n<o.length;n++){var i=o[n];if(i.name===t.name)return void console.warn("Area "+t.name+" send twice")}var r=new bn(t,this);this._areas.push(r),this.state.$data.areaGetter=function(){return e._areas}},t.prototype._setAreaState=function(t){for(var e=0,n=this._areas;e<n.length;e++){var o=n[e];if(o.areaId===t.areaId)return void(t.playing?o.play():o.pause())}console.warn("Area state received for "+t.areaId+" which doesn't exists!")},t}(),wn=On,Cn=function(){function t(){this.config=new o["default"]({data:{theme:this._safeString(localStorage.getItem("theme"))},watch:{theme:function(t){localStorage.setItem("theme",t)}}})}return t.prototype._safeString=function(t){return null===t||null==t||"null"===t||"undefined"===typeof t?null:t},t}(),Sn=Cn,Pn=n("1e5c"),In=function(){function t(t,e){var n=this;this._id=e.areaId,this._manager=t,this._baseVolume=0,this._userVolume=1,this._fadeOutStartDistance=0,this._fadeOutEndDistance=0,this._source=e.soundUrl,this._sound=new Pn["Howl"]({src:[e.soundUrl],autoplay:!0,volume:e.state.volume||0,loop:e.state.loop||!0,onload:function(){n._resync()}}),this._sound.load(),this._sound.orientation(0,0,0);var o=this._sound.pannerAttr();o.panningModel=e.state.panningModel||"HRTF",o.refDistance=e.state.refDistance||1,o.rolloffFactor=e.state.rolloffFactor||.1,o.distanceModel=e.state.distanceModel||"inverse",this._sound.pannerAttr(o),this._sync=null,this.update(e.state)}return t.prototype._updateVolume=function(){var t=this._manager.state.location,e=this._sound._pos,n=1;if(null!=this._fadeOutEndDistance&&this._fadeOutEndDistance!==this._fadeOutStartDistance&&e){e={x:e[0],y:e[1],z:e[2]};var o=t.x-e.x,i=t.y-e.y,r=t.z-e.z,a=Math.sqrt(o*o+i*i+r*r);if(a>this._fadeOutStartDistance){var s=1-(a-this._fadeOutStartDistance)/(this._fadeOutEndDistance-this._fadeOutStartDistance);s>1&&(s=1),s<0&&(s=0),n=s}}var u=this._userVolume*this._baseVolume*n;this._sound.volume(u)},t.prototype.setVolume=function(t){this._userVolume=t,this._updateVolume()},t.prototype.isPlaying=function(){return this._sound.playing()},t.prototype.getSeek=function(){return this._sound.seek()},t.prototype._resync=function(){var t=this;if(null!=this._sync&&(-1===this._sync&&this._manager._audios.forEach((function(e){if(e.isPlaying()&&e._source===t._source){var n=e.getSeek();t._sound.seek(n)}else;})),this._sync>0&&this._sound.playing())){var e=(new Date).getTime(),n=(e-this._sync)/1e3,o=this._sound.duration(),i=Math.floor(n/o);n-=o*i;while(n>o)n-=o;while(n<0)n+=o;console.log("Resyncing to "+n+" duration="+o),this._sound.seek(n)}},t.prototype.update=function(t){if("undefined"!==typeof t.x&&"undefined"!==typeof t.y&&"undefined"!==typeof t.z&&(this._sound.pos(t.x,t.y,t.z),this._updateVolume()),null!=t.orientationX&&null!=t.orientationY&&null!=t.orientationZ&&this._sound.orientation(t.orientationX,t.orientationY,t.orientationZ),"undefined"!==typeof t.sync&&(this._sync=t.sync,this._resync()),"undefined"!==typeof t.rate&&this._sound.rate(t.rate),"undefined"!==typeof t.volume&&(this._baseVolume=t.volume,this._updateVolume()),"undefined"!==typeof t.loop&&this._sound.loop(t.loop),"undefined"!==typeof t.maxDistance){var e=this._sound.pannerAttr();e.maxDistance=t.maxDistance,this._sound.pannerAttr(e)}if("undefined"!==typeof t.refDistance){e=this._sound.pannerAttr();e.refDistance=t.refDistance,this._sound.pannerAttr(e)}"undefined"!==typeof t.fadeOutEndDistance&&(this._fadeOutEndDistance=t.fadeOutEndDistance,this._updateVolume()),"undefined"!==typeof t.fadeOutStartDistance&&(this._fadeOutStartDistance=t.fadeOutStartDistance,this._updateVolume()),"undefined"!==typeof t.playing&&(!0===t.playing?this._sound.playing()||(this._sound.play(),this._resync()):this._sound.playing()&&this._sound.pause())},t.prototype.release=function(){this._sound.pause(),this._sound.stop(),this._sound.unload()},t}(),En=In,An=function(){function t(t){var e=this;this._audios=new Map,this.startTime=(new Date).getTime(),this.state=new o["default"]({data:{},computed:{location:function(){return this.$audioServer.managedData.location},volume:function(){return this.$audioServer.state.volume}}}),t.state.$on("packet",(function(t){if(!0!==t.isHandled){var n=t.data;if(t.id===N.SPATIAL_AUDIO_DEFINITION){t.isHandled=!0;var o=(new ut).fromJson(n);e._createAudio(o)}else if(t.id===N.SPATIAL_AUDIO_UPDATE){t.isHandled=!0;o=(new lt).fromJson(n);e._updateState(o)}else if(t.id===N.SPATIAL_AUDIO_REMOVE){t.isHandled=!0;o=(new dt).fromJson(n);e._removeAudio(o)}else t.id===N.RELOAD&&(t.isHandled=!0,e._clean())}})),t.state.$watch("isConnected",(function(t){t||e._clean()})),this.state.$watch("location",(function(t){if(null!=t){Pn["Howler"].pos(t.x,t.y,t.z);var n=t.pitch*Math.PI/180,o=t.yaw*Math.PI/180,i=Math.cos(n),r=-i*Math.sin(o),a=-Math.sin(n),s=i*Math.cos(o);Pn["Howler"].orientation(r,a,s,0,1,0),e._audios.forEach((function(t){return t._updateVolume()}))}})),this.state.$watch("volume",(function(t){e._audios.forEach((function(t){return t.setVolume(e._calculateCurrentAudioLevel())}))}),{deep:!0,immediate:!0})}return t.prototype._calculateCurrentAudioLevel=function(){return this.state.volume.effect.value/100*(this.state.volume.master.value/100)},t.prototype._createAudio=function(t){var e=this._audios.get(t.audioId);null==e?(e=new En(this,t),e.setVolume(this._calculateCurrentAudioLevel()),this._audios.set(t.audioId,e)):this._updateState(t.state)},t.prototype._updateState=function(t){var e=this._audios.get(t.audioId);null!=e&&e.update(t)},t.prototype._removeAudio=function(t){var e=this._audios.get(t.audioId);null!=e&&e.release(),this._audios.delete(t.audioId)},t.prototype._clean=function(){this._audios.forEach((function(t){return t.release()})),this._audios.clear()},t}(),kn=An,xn=function(){function t(t){var e=this;this.state=new o["default"]({data:{rides:[]},computed:{}}),t.state.$watch("isConnected",(function(t){t||e._clean()})),t.state.$on("packet",(function(t){if(!0!==t.isHandled){var n=t.data;if(t.id===N.OPERATOR_DEFINITION){t.isHandled=!0;var o=(new K).fromJson(n);e._addDefinitions(o)}else if(t.id===N.OPERATOR_CONTROL_UPDATE){t.isHandled=!0;o=(new Z).fromJson(n);e._updateControl(o)}else if(t.id===N.OPERATOR_RIDE_UPDATE){t.isHandled=!0;o=(new X).fromJson(n);e._updateRide(o)}else if(t.id===N.OPERATOR_SLOT_UPDATE){t.isHandled=!0;o=(new B).fromJson(n);e._updateSlot(o)}}}))}return t.prototype._getRideById=function(t){for(var e=0,n=this.state.rides;e<n.length;e++){var o=n[e];if(o.id===t)return o}return null},t.prototype._addDefinitions=function(t){for(var e=0,n=t.rides;e<n.length;e++){var o=n[e],i=new Tn(o);this.state.rides.push(i)}},t.prototype._updateSlot=function(t){var e=this._getRideById(t.data.ride_id);null!=e&&e.updateSlot(t)},t.prototype._updateControl=function(t){var e=this._getRideById(t.control.ride_id);null!=e&&e.updateControl(t)},t.prototype._updateRide=function(t){var e=this._getRideById(t.ride.id);null!=e&&e.update(t)},t.prototype._clean=function(){this.state.rides.splice(0,this.state.rides.length)},t}(),Dn=xn,Tn=function(){function t(t){this.state=new o["default"]({data:{controls:[],name:"",operatorSlots:[],forceDisplay:!1}});for(var e=[],n=0,i=t.controls;n<i.length;n++){var r=i[n];e.push(new Rn(this,r))}e=e.sort((function(t,e){var n=t.sort,o=e.sort;return n===o?0:null==n?-1:null==o?1:n<o?-1:n>o?1:0})),e=e.sort((function(t,e){var n=t.group,o=e.group;return n===o?0:null==n?-1:null==o?1:n<o?-1:n>o?1:0}));for(var a=[],s=0,u=t.operator_slots;s<u.length;s++){var l=u[s];a.push(new jn(this,l))}this.id=t.id,this.state=new o["default"]({data:{controls:e,name:t.name,operatorSlots:a,forceDisplay:t.force_display||!1}})}return t.prototype.update=function(t){this.state.name=t.ride.name||!1,this.state.forceDisplay=t.ride.force_display||!1},t.prototype.isOperator=function(t){for(var e=0,n=this.state.operatorSlots;e<n.length;e++){var o=n[e];if(o.state.uuid===t)return!0}return!1},t.prototype.getControlGroups=function(){for(var t=[],e=function(e){var n=e.state.group,o=e.state.groupDisplay;null!=n&&null==t.find((function(t){return t[0]==n}))&&t.push([n,null!==o&&void 0!==o?o:n])},n=0,o=this.state.controls;n<o.length;n++){var i=o[n];e(i)}return t.sort()},t.prototype.updateSlot=function(t){for(var e=0,n=this.state.operatorSlots;e<n.length;e++){var o=n[e];if(o.slot===t.data.slot)return void o.update(t)}console.warn("Failed to handle slot update")},t.prototype.updateControl=function(t){for(var e=0,n=this.state.controls;e<n.length;e++){var o=n[e];if(o.id===t.control.id)return void o.update(t)}console.warn("Failed to handle control update")},t}(),jn=function(){function t(t,e){this.state=new o["default"]({data:{uuid:null,name:null}}),this.ride=t,this.slot=e.slot,this.state.uuid=e.uuid,this.state.name=e.name}return t.prototype.update=function(t){this.state.uuid=t.data.uuid||null,this.state.name=t.data.name||null},t}(),Rn=function(){function t(t,e){this.state=new o["default"]({data:{data:null,isEnabled:!1,kind:null,name:null,sort:0,group:"default",groupDisplay:null}}),this.ride=t,this.id=e.id,this.state.data=e.data,this.state.isEnabled=e.is_enabled,this.state.kind=e.kind||null,this.state.name=e.name||null,this.state.sort=e.sort||null,this.state.group=e.group||null,this.state.groupDisplay=e.group_display||null}return t.prototype.update=function(t){var e,n,o,i,r;this.state.data=t.control.data,this.state.isEnabled=t.control.is_enabled,this.state.kind=null!==(e=t.control.kind)&&void 0!==e?e:null,this.state.name=null!==(n=t.control.name)&&void 0!==n?n:null,this.state.sort=null!==(o=t.control.sort)&&void 0!==o?o:null,this.state.group=null!==(i=t.control.group)&&void 0!==i?i:null,this.state.groupDisplay=null!==(r=t.control.group_display)&&void 0!==r?r:null},t}();o["default"].config.productionTip=!1,o["default"].use(dn.a),h.saveCurrentParams(),Howler.init(),Howler.ctx=new(null!==(gn=window.AudioContext)&&void 0!==gn?gn:window.webkitAudioContext),o["default"].prototype.$localConfig=new Sn,o["default"].prototype.$audioServer=un,o["default"].prototype.$areaManager=new wn(un),o["default"].prototype.$spatialAudioManager=new kn(un),o["default"].prototype.$operatorManager=new Dn(un),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(on)}}).$mount("#app"),"serviceWorker"in navigator&&(navigator.serviceWorker.getRegistrations().then((function(t){for(var e=0,n=t;e<n.length;e++){var o=n[e];o.unregister()}})),caches.keys().then((function(t){return Promise.all(t.map((function(t){return caches.delete(t)})))})))},d354:function(t,e,n){"use strict";n("f34b")},e1b0:function(t,e,n){},e69e:function(t,e,n){"use strict";n("e1b0")},f34b:function(t,e,n){},f46e:function(t,e,n){},fd52:function(t,e,n){}});